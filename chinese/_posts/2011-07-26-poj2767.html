---
layout: post
title: poj2767
category: chinese
---
<p>题意：一些圆台形(中空，厚度忽略不计)的碗，罗在一起，问最小高度是多少。</p>
<p>分析：枚举所有情况，每放一个碗，就要记录其碗底的高度。记录碗底高度的方法是，枚举下面所有的碗，把想象中把这个碗与下面的碗直接叠放在一起，看碗底的高度，取最大值，得到这个碗底的真实高度。每次罗起了所有的碗，就根据每个碗碗底的高度计算其碗顶的高度，并取最大值，即为本次罗碗的高度。不断更新最终结果，取最小值。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('3d2bacb5-934d-40c9-8a8f-cfa4bd64142b')"><img id="code_img_closed_3d2bacb5-934d-40c9-8a8f-cfa4bd64142b" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_3d2bacb5-934d-40c9-8a8f-cfa4bd64142b" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('3d2bacb5-934d-40c9-8a8f-cfa4bd64142b',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_3d2bacb5-934d-40c9-8a8f-cfa4bd64142b" class="cnblogs_code_hide">
<pre><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstdio</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstdlib</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstring</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> maxn 10</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> Bowl<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> r1, r2, h;<br />} bowl[maxn];<br /><br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> vis[maxn];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> sel[maxn];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ans, n;<br /></span><span style="color: #0000ff;">double</span><span style="color: #000000;"> height[maxn];<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> input()<br />{<br />    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n);<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">bowl[i].h, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">bowl[i].r1, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">bowl[i].r2);<br />}<br /><br /></span><span style="color: #0000ff;">double</span><span style="color: #000000;"> inc(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> b)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (bowl[b].r1 </span><span style="color: #000000;">&gt;=</span><span style="color: #000000;"> bowl[a].r2)<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> bowl[a].h;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (bowl[b].r2 </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> bowl[a].r1)<br />        </span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> ret </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (bowl[b].r1 </span><span style="color: #000000;">&gt;=</span><span style="color: #000000;"> bowl[a].r1)<br />        ret </span><span style="color: #000000;">=</span><span style="color: #000000;"> max(ret, bowl[a].h </span><span style="color: #000000;">*</span><span style="color: #000000;"> (bowl[b].r1 </span><span style="color: #000000;">-</span><span style="color: #000000;"> bowl[a].r1) </span><span style="color: #000000;">*</span><span style="color: #800080;">1.0</span><span style="color: #000000;">/</span><span style="color: #000000;"> (bowl[a].r2<br />                </span><span style="color: #000000;">-</span><span style="color: #000000;"> bowl[a].r1));<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (bowl[b].r2 </span><span style="color: #000000;">&lt;=</span><span style="color: #000000;"> bowl[a].r2)<br />        ret </span><span style="color: #000000;">=</span><span style="color: #000000;"> max(ret, bowl[a].h </span><span style="color: #000000;">*</span><span style="color: #000000;"> (bowl[b].r2 </span><span style="color: #000000;">-</span><span style="color: #000000;"> bowl[a].r1) </span><span style="color: #000000;">*</span><span style="color: #800080;">1.0</span><span style="color: #000000;">/</span><span style="color: #000000;"> (bowl[a].r2<br />                </span><span style="color: #000000;">-</span><span style="color: #000000;"> bowl[a].r1) </span><span style="color: #000000;">-</span><span style="color: #000000;"> bowl[b].h);<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (bowl[b].r2 </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> bowl[a].r2)<br />        ret </span><span style="color: #000000;">=</span><span style="color: #000000;"> max(ret, bowl[a].h </span><span style="color: #000000;">-</span><span style="color: #000000;"> bowl[b].h </span><span style="color: #000000;">*</span><span style="color: #000000;"> (bowl[a].r2 </span><span style="color: #000000;">-</span><span style="color: #000000;"> bowl[b].r1) </span><span style="color: #000000;">*</span><span style="color: #800080;">1.0</span><span style="color: #000000;"><br />                </span><span style="color: #000000;">/</span><span style="color: #000000;"> (bowl[b].r2 </span><span style="color: #000000;">-</span><span style="color: #000000;"> bowl[b].r1));<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ret;<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> find(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a)<br />{<br />    height[x] </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> x; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        height[x] </span><span style="color: #000000;">=</span><span style="color: #000000;"> max(height[x], height[i] </span><span style="color: #000000;">+</span><span style="color: #000000;"> inc(sel[i], a));<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> dfs(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> step)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (step </span><span style="color: #000000;">==</span><span style="color: #000000;"> n)<br />    {<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> temp </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />            temp </span><span style="color: #000000;">=</span><span style="color: #000000;"> max(temp, (</span><span style="color: #0000ff;">int</span><span style="color: #000000;">) (height[i] </span><span style="color: #000000;">+</span><span style="color: #000000;"> bowl[sel[i]].h));<br />        ans </span><span style="color: #000000;">=</span><span style="color: #000000;"> min(ans, temp);<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (</span><span style="color: #000000;">!</span><span style="color: #000000;">vis[i])<br />        {<br />            vis[i] </span><span style="color: #000000;">=</span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />            sel[step] </span><span style="color: #000000;">=</span><span style="color: #000000;"> i;<br />            find(step, i);<br />            dfs(step </span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />            vis[i] </span><span style="color: #000000;">=</span><span style="color: #0000ff;">false</span><span style="color: #000000;">;<br />        }<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("t.txt", "r", stdin);</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> t;<br />    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">t);<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (t</span><span style="color: #000000;">--</span><span style="color: #000000;">)<br />    {<br />        input();<br />        memset(vis, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(vis));<br />        ans </span><span style="color: #000000;">=</span><span style="color: #800080;">0x3f3f3f3f</span><span style="color: #000000;">;<br />        dfs(</span><span style="color: #800080;">0</span><span style="color: #000000;">);<br />        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, ans);<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></pre>
</div>
</div>
