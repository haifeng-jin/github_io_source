---
layout: post
title: poj2613
category: chinese
---
<p>题意：给出p,q,r,s，求c(p,q)/c(r,s)</p>
<p>分析：利用组合数公式，写出整体的分子和分母（用数组标记，分子分母各有哪些数），把相同的数字约去。然后把分子乘上，分母除掉。但是这样直接乘除会损失精度。所以我们定义double ans = 1;然后当ans&lt;1时算乘法，ans&gt;=1时算除法，以控制ans始终在1不会和1相差10000倍以上，以保证精度。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('d9bcf5d1-5334-40d8-8a74-db24e1976b43')"><img id="code_img_closed_d9bcf5d1-5334-40d8-8a74-db24e1976b43" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /><img style="display: none;" id="code_img_opened_d9bcf5d1-5334-40d8-8a74-db24e1976b43" class="code_img_opened" onclick="cnblogs_code_hide('d9bcf5d1-5334-40d8-8a74-db24e1976b43',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_d9bcf5d1-5334-40d8-8a74-db24e1976b43" class="cnblogs_code_hide">
<pre>#include &lt;iostream&gt;<br />#include &lt;cstdlib&gt;<br />#include &lt;cstring&gt;<br />#include &lt;cstdio&gt;<br /><span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span> std;<br /><br /><span style="color: #0000ff;">#define</span> maxn 10005<br /><br /><span style="color: #0000ff;">int</span> a, b, c, d;<br /><span style="color: #0000ff;">int</span> up[maxn], down[maxn];<br /><span style="color: #0000ff;">int</span> n;<br /><br /><span style="color: #0000ff;">void</span> make(<span style="color: #0000ff;">int</span> m, <span style="color: #0000ff;">int</span> n, <span style="color: #0000ff;">int</span> up[], <span style="color: #0000ff;">int</span> down[])<br />{<br />    <span style="color: #0000ff;">if</span> (n - m &lt; m)<br />        m = n - m;<br />    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = n; i &gt; n - m; i--)<br />        up[i]++;<br />    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= m; i++)<br />        down[i]++;<br />}<br /><br /><span style="color: #0000ff;">void</span> work()<br />{<br />    n = max(max(a, b), max(c, d));<br />    <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt;= n; i++)<br />    {<br />        <span style="color: #0000ff;">int</span> x = min(up[i], down[i]);<br />        up[i] -= x;<br />        down[i] -= x;<br />    }<br />    <span style="color: #0000ff;">int</span> p = <span style="color: #800080;">1</span>, q = <span style="color: #800080;">1</span>;<br />    <span style="color: #0000ff;">while</span> (p &lt;= n &amp;&amp; !up[p])<br />        p++;<br />    <span style="color: #0000ff;">while</span> (q &lt;= n &amp;&amp; !down[q])<br />        q++;<br />    <span style="color: #0000ff;">double</span> ans = <span style="color: #800080;">1</span>;<br />    <span style="color: #0000ff;">while</span> (p &lt;= n || q &lt;= n)<br />    {<br />        <span style="color: #0000ff;">if</span> ((ans &lt;= <span style="color: #800080;">1</span> &amp;&amp; p &lt;= n) || q &gt; n)<br />        {<br />            ans *= p;<br />            up[p]--;<br />            <span style="color: #0000ff;">while</span> (p &lt;= n &amp;&amp; !up[p])<br />                p++;<br />        }<br />        <span style="color: #0000ff;">else</span><br />        {<br />            ans /= q;<br />            down[q]--;<br />            <span style="color: #0000ff;">while</span> (q &lt;= n &amp;&amp; !down[q])<br />                q++;<br />        }<br />    }<br />    printf(<span style="color: #800000;">"</span><span style="color: #800000;">%.5f\n</span><span style="color: #800000;">"</span>, ans);<br />}<br /><br /><span style="color: #0000ff;">int</span> main()<br />{<br />    <span style="color: #008000;">//</span><span style="color: #008000;">freopen("t.txt", "r", stdin);</span><span style="color: #008000;"><br /></span>    <span style="color: #0000ff;">while</span> (~scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d%d</span><span style="color: #800000;">"</span>, &amp;a, &amp;b, &amp;c, &amp;d))<br />    {<br />        memset(up, <span style="color: #800080;">0</span>, <span style="color: #0000ff;">sizeof</span>(up));<br />        memset(down, <span style="color: #800080;">0</span>, <span style="color: #0000ff;">sizeof</span>(down));<br />        make(b, a, up, down);<br />        make(d, c, down, up);<br />        work();<br />    }<br />    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span>;<br />}</pre>
</div>
</div>
<p></p>
