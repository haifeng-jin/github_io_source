---
layout: post
title: poj1106
category: chinese
---
<p>极坐标排序+叉积判断夹角</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('c981537f-7345-4837-8ffa-fb5d0fb05d08')"><img id="code_img_closed_c981537f-7345-4837-8ffa-fb5d0fb05d08" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_c981537f-7345-4837-8ffa-fb5d0fb05d08" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('c981537f-7345-4837-8ffa-fb5d0fb05d08',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_c981537f-7345-4837-8ffa-fb5d0fb05d08" class="cnblogs_code_hide">
<pre>#include &lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cstdlib&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;<span style="color: #000000;">
#include </span>&lt;algorithm&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;

</span><span style="color: #0000ff;">#define</span> maxn 200
<span style="color: #0000ff;">#define</span> eps 1.0e-8

<span style="color: #0000ff;">struct</span><span style="color: #000000;"> Point
{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, y;
}s, point[maxn];

</span><span style="color: #0000ff;">double</span><span style="color: #000000;"> r;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n;

</span><span style="color: #0000ff;">bool</span> <span style="color: #0000ff;">operator</span> &lt; (<span style="color: #0000ff;">const</span> Point &amp;a, <span style="color: #0000ff;">const</span> Point &amp;<span style="color: #000000;">b)
{
    </span><span style="color: #0000ff;">return</span> atan2((<span style="color: #0000ff;">double</span>)a.x, (<span style="color: #0000ff;">double</span>)a.y) &lt; atan2((<span style="color: #0000ff;">double</span>)b.x, (<span style="color: #0000ff;">double</span><span style="color: #000000;">)b.y);
}

</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> input()
{
    </span><span style="color: #0000ff;">int</span> cnt = <span style="color: #800080;">0</span><span style="color: #000000;">;
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span>, &amp;<span style="color: #000000;">n);
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n; i++<span style="color: #000000;">)
    {
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>, &amp;point[cnt].x, &amp;<span style="color: #000000;">point[cnt].y);
        point[cnt].x </span>-=<span style="color: #000000;"> s.x;
        point[cnt].y </span>-=<span style="color: #000000;"> s.y;
        </span><span style="color: #0000ff;">if</span> (r * r &gt; point[cnt].x * point[cnt].x + point[cnt].y * point[cnt].y -<span style="color: #000000;"> eps)
            cnt</span>++<span style="color: #000000;">;
    }
    n </span>=<span style="color: #000000;"> cnt;
}

</span><span style="color: #0000ff;">double</span><span style="color: #000000;"> xmulti(Point a, Point b)
{
    </span><span style="color: #0000ff;">return</span> a.x * b.y - a.y *<span style="color: #000000;"> b.x;
}

</span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> within(Point a, Point b)
{
    </span><span style="color: #0000ff;">return</span> xmulti(b, a) &gt; -<span style="color: #000000;">eps;
}

</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> work()
{
    </span><span style="color: #0000ff;">int</span> r = <span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">int</span> ans = <span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n; i++<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">while</span> (r - i &lt; n &amp;&amp; within(point[i], point[r %<span style="color: #000000;"> n]))
            r</span>++<span style="color: #000000;">;
        ans </span>= max(ans, r -<span style="color: #000000;"> i);
    }
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ans;
}

</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("t.txt", "r", stdin);</span>
    <span style="color: #0000ff;">while</span> (scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d%lf</span><span style="color: #800000;">"</span>, &amp;s.x, &amp;s.y, &amp;r), r &gt;= <span style="color: #800080;">0</span><span style="color: #000000;">)
    {
        input();
        sort(point, point </span>+<span style="color: #000000;"> n);
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, work());
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
</div>
<p>&nbsp;</p>
