---
layout: post
title: poj1423
category: chinese
---
<p>题意：给出n，求n！的位数。</p>
<p>分析：首先想到的是用log10(n!)=log10(1)+log10(2)+...+log10(n)。但是由于log10运行时间较长，会超时，所以可以先将log10(1)～log10(maxn)存入数组，则省去了多次调用的时间浪费。但是有一种更好的做法就是利用stirling公式。</p>
<p>stirling公式：<span>lim(n&rarr;&infin;) (n/e)^n*&radic;(2&pi;n) / n! = 1</span></p>
<p>虽然本题中的n并不是正无穷，但是求出的n!的位数还是不会出现误差的。所以我们直接以此公式整理出log10(n!)=log10(sqrt(2 * acos(-1) * n)) + n * log10(n / exp(1.0));</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('db673edd-1ca1-493e-b16b-a86e11c9f7a6')"><img id="code_img_closed_db673edd-1ca1-493e-b16b-a86e11c9f7a6" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_db673edd-1ca1-493e-b16b-a86e11c9f7a6" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('db673edd-1ca1-493e-b16b-a86e11c9f7a6',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_db673edd-1ca1-493e-b16b-a86e11c9f7a6" class="cnblogs_code_hide">
<pre>#include &lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstdlib&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;

</span><span style="color: #0000ff;">#define</span> eps 1e-8

<span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("t.txt", "r", stdin);</span>
    <span style="color: #0000ff;">int</span><span style="color: #000000;"> t;
    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span>, &amp;<span style="color: #000000;">t);
    </span><span style="color: #0000ff;">while</span> (t--<span style="color: #000000;">)
    {
        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n;
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span>, &amp;<span style="color: #000000;">n);
        </span><span style="color: #0000ff;">double</span> ans = log10(sqrt(<span style="color: #800080;">2</span> * acos(-<span style="color: #800080;">1</span>) * n)) + n * log10(n / exp(<span style="color: #800080;">1.0</span><span style="color: #000000;">));
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span>, (<span style="color: #0000ff;">int</span>)ans + <span style="color: #800080;">1</span><span style="color: #000000;">);
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
</div>
<p>&nbsp;</p>
