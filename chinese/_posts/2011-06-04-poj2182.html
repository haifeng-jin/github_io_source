---
layout: post
title: poj2182
category: chinese
---
<p>题意：1~n,乱序排列，告诉每个位置的前面的数字中比它小的数的个数，求每个位置的数字是多少</p>
<p>分析：用树状数组来做，第i位如果是1，表示i在数列中的位置已经确定。全部读入到f[]后，从最后向前依次求出是几，因为每次对于未确定的最后一个数来说是可以根据它前面有多少数字比它小以及之前确定的数字（在它后面的数字）而确定它是几的。二分查找当前位置填几，设这个数字为a，应满足树状数组求和结果sum(a)，即后面已经填好的比a小的个数，加上f[i]，即前面比a小的个数，等于a-1。猜大了则结果大于a-1，猜小了则小于。找到后把树状数组第a位标1。时间复杂度为O((logn)^2 * n)</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('4496ba2a-f168-415a-b730-66d24bcd9ad5')"><img id="code_img_closed_4496ba2a-f168-415a-b730-66d24bcd9ad5" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_4496ba2a-f168-415a-b730-66d24bcd9ad5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('4496ba2a-f168-415a-b730-66d24bcd9ad5',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_4496ba2a-f168-415a-b730-66d24bcd9ad5" class="cnblogs_code_hide">
<div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstdlib</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstring</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstdio</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> maxn 8005</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n, f[maxn];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ar[maxn];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ans[maxn];<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> lowb(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> t)<br />{<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> t </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">(</span><span style="color: #000000;">-</span><span style="color: #000000;">t);<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> add(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> v)<br />{<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> maxn; ar[i] </span><span style="color: #000000;">+=</span><span style="color: #000000;"> v, i </span><span style="color: #000000;">+=</span><span style="color: #000000;"> lowb(i));<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> sum(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> s </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (; i </span><span style="color: #000000;">&gt;</span><span style="color: #800080;">0</span><span style="color: #000000;">; s </span><span style="color: #000000;">+=</span><span style="color: #000000;"> ar[i], i </span><span style="color: #000000;">-=</span><span style="color: #000000;"> lowb(i));<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> s;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> calspace(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> index)<br />{<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> index </span><span style="color: #000000;">-</span><span style="color: #000000;"> sum(index);<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> binarysearch(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> l </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> r </span><span style="color: #000000;">=</span><span style="color: #000000;"> n;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> mid;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (l </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> r)<br />    {<br />        mid </span><span style="color: #000000;">=</span><span style="color: #000000;"> (l </span><span style="color: #000000;">+</span><span style="color: #000000;"> r) </span><span style="color: #000000;">/</span><span style="color: #800080;">2</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> temp </span><span style="color: #000000;">=</span><span style="color: #000000;"> calspace(mid);<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (temp </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> a)<br />            l </span><span style="color: #000000;">=</span><span style="color: #000000;"> mid </span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />            r </span><span style="color: #000000;">=</span><span style="color: #000000;"> mid;<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> l;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("t.txt", "r", stdin);</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n);<br />    f[</span><span style="color: #800080;">0</span><span style="color: #000000;">] </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">f[i]);<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> n </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&gt;=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">--</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a </span><span style="color: #000000;">=</span><span style="color: #000000;"> binarysearch(f[i] </span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />        ans[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> a;<br />        add(a, </span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />    }<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, ans[i]);<br />    </span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></div>

</div>

</div>
