---
layout: post
title: poj1324
category: chinese
---
<p>题意：给出一个贪吃蛇地图，以及贪吃蛇现在身体各个块所在的位置，求它的头走到（1,1）位置最少需要多少步。</p>
<p>分析：搜索题，用vis[20][20][16384]判重，第三维表示蛇的形状，用位操作，每两位表示一个方向（00，01，10，11表示四个方向）。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('96c455b3-52e9-44f0-aad5-f2f206f3df1d')"><img id="code_img_closed_96c455b3-52e9-44f0-aad5-f2f206f3df1d" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_96c455b3-52e9-44f0-aad5-f2f206f3df1d" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('96c455b3-52e9-44f0-aad5-f2f206f3df1d',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_96c455b3-52e9-44f0-aad5-f2f206f3df1d" class="cnblogs_code_hide">
<div><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstdio</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstdlib</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstring</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">queue</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> maxn 21</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> maxl 9</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> Node<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, y, state, step;<br />};<br /><br /></span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> Point<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, y;<br />} point[maxl];<br /><br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> map[maxn][maxn];<br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> vis[maxn][maxn][</span><span style="color: #800080;">16384</span><span style="color: #000000;">];<br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> vis1[maxn][maxn];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n, m, l;<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> maxstep, minstep;<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dir[</span><span style="color: #800080;">4</span><span style="color: #000000;">][</span><span style="color: #800080;">2</span><span style="color: #000000;">] </span><span style="color: #000000;">=</span><span style="color: #000000;"><br />{<br />{ </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #800080;">0</span><span style="color: #000000;"> },<br />{ </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #800080;">1</span><span style="color: #000000;"> },<br />{ </span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #800080;">0</span><span style="color: #000000;"> },<br />{ </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;"> } };<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> input()<br />{<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> l; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">point[i].x, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">point[i].y);<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> t;<br />    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">t);<br />    memset(map, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(map));<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> t; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, y;<br />        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">x, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">y);<br />        map[x][y] </span><span style="color: #000000;">=</span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />    }<br />}<br /><br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> ok1(Node </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">a)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (a.x </span><span style="color: #000000;">&lt;=</span><span style="color: #800080;">0</span><span style="color: #000000;">||</span><span style="color: #000000;"> a.x </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> n </span><span style="color: #000000;">||</span><span style="color: #000000;"> a.y </span><span style="color: #000000;">&lt;=</span><span style="color: #800080;">0</span><span style="color: #000000;">||</span><span style="color: #000000;"> a.y </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> m)<br />        </span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">false</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;">!</span><span style="color: #000000;">vis1[a.x][a.y] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;">!</span><span style="color: #000000;">map[a.x][a.y];<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> bfs1()<br />{<br />    queue</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Node</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> q;<br />    Node temp;<br />    temp.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].x;<br />    temp.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].y;<br />    temp.step </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    q.push(temp);<br />    memset(vis1, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(vis1));<br />    vis1[temp.x][temp.y] </span><span style="color: #000000;">=</span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (</span><span style="color: #000000;">!</span><span style="color: #000000;">q.empty())<br />    {<br />        temp </span><span style="color: #000000;">=</span><span style="color: #000000;"> q.front();<br />        q.pop();<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">4</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            Node temp2;<br />            temp2.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> temp.x </span><span style="color: #000000;">+</span><span style="color: #000000;"> dir[i][</span><span style="color: #800080;">0</span><span style="color: #000000;">];<br />            temp2.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> temp.y </span><span style="color: #000000;">+</span><span style="color: #000000;"> dir[i][</span><span style="color: #800080;">1</span><span style="color: #000000;">];<br />            temp2.step </span><span style="color: #000000;">=</span><span style="color: #000000;"> temp.step </span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (ok1(temp2))<br />            {<br />                vis1[temp2.x][temp2.y] </span><span style="color: #000000;">=</span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (temp2.x </span><span style="color: #000000;">==</span><span style="color: #800080;">1</span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> temp2.y </span><span style="color: #000000;">==</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />                    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp2.step;<br />                q.push(temp2);<br />            }<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> setmap()<br />{<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> l; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        map[point[i].x][point[i].y] </span><span style="color: #000000;">=</span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> clearmap()<br />{<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> l; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        map[point[i].x][point[i].y] </span><span style="color: #000000;">=</span><span style="color: #0000ff;">false</span><span style="color: #000000;">;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> getmin()<br />{<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> bfs1();<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> getmax()<br />{<br />    setmap();<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ret </span><span style="color: #000000;">=</span><span style="color: #000000;"> bfs1();<br />    clearmap();<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ret;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> getstate()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ret </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> l; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">4</span><span style="color: #000000;">; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (point[i].x </span><span style="color: #000000;">==</span><span style="color: #000000;"> point[i </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">].x </span><span style="color: #000000;">-</span><span style="color: #000000;"> dir[j][</span><span style="color: #800080;">0</span><span style="color: #000000;">] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> point[i].y </span><span style="color: #000000;">==</span><span style="color: #000000;"> point[i </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">].y </span><span style="color: #000000;">-</span><span style="color: #000000;"> dir[j][</span><span style="color: #800080;">1</span><span style="color: #000000;">])<br />            {<br />                ret </span><span style="color: #000000;">&lt;&lt;=</span><span style="color: #800080;">2</span><span style="color: #000000;">;<br />                ret </span><span style="color: #000000;">|=</span><span style="color: #000000;"> j;<br />            }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ret;<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> getpoint(Node </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">a)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> state </span><span style="color: #000000;">=</span><span style="color: #000000;"> a.state;<br />    point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].x </span><span style="color: #000000;">=</span><span style="color: #000000;"> a.x;<br />    point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].y </span><span style="color: #000000;">=</span><span style="color: #000000;"> a.y;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> l; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> d </span><span style="color: #000000;">=</span><span style="color: #000000;"> (state </span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;"> ((l </span><span style="color: #000000;">-</span><span style="color: #000000;"> i </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">) </span><span style="color: #000000;">*</span><span style="color: #800080;">2</span><span style="color: #000000;">)) </span><span style="color: #000000;">&amp;</span><span style="color: #800080;">3</span><span style="color: #000000;">;<br />        point[i].x </span><span style="color: #000000;">=</span><span style="color: #000000;"> point[i </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">].x </span><span style="color: #000000;">-</span><span style="color: #000000;"> dir[d][</span><span style="color: #800080;">0</span><span style="color: #000000;">];<br />        point[i].y </span><span style="color: #000000;">=</span><span style="color: #000000;"> point[i </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">].y </span><span style="color: #000000;">-</span><span style="color: #000000;"> dir[d][</span><span style="color: #800080;">1</span><span style="color: #000000;">];<br />    }<br />}<br /><br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> ok(Node </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">a)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (a.x </span><span style="color: #000000;">&lt;=</span><span style="color: #800080;">0</span><span style="color: #000000;">||</span><span style="color: #000000;"> a.x </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> n </span><span style="color: #000000;">||</span><span style="color: #000000;"> a.y </span><span style="color: #000000;">&lt;=</span><span style="color: #800080;">0</span><span style="color: #000000;">||</span><span style="color: #000000;"> a.y </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> m)<br />        </span><span style="color: #0000ff;">return</span><span style="color: #0000ff;">false</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;">!</span><span style="color: #000000;">vis[a.x][a.y][a.state] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;">!</span><span style="color: #000000;">map[a.x][a.y];<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> bfs()<br />{<br />    queue</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Node</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> q;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> state </span><span style="color: #000000;">=</span><span style="color: #000000;"> getstate();<br />    Node temp;<br />    temp.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].x;<br />    temp.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].y;<br />    temp.state </span><span style="color: #000000;">=</span><span style="color: #000000;"> state;<br />    temp.step </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    q.push(temp);<br />    memset(vis, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(vis));<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (</span><span style="color: #000000;">!</span><span style="color: #000000;">q.empty())<br />    {<br />        temp </span><span style="color: #000000;">=</span><span style="color: #000000;"> q.front();<br />        q.pop();<br />        getpoint(temp);<br />        setmap();<br />        Node temp2;<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #800080;">4</span><span style="color: #000000;">; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            temp2.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> temp.x </span><span style="color: #000000;">+</span><span style="color: #000000;"> dir[i][</span><span style="color: #800080;">0</span><span style="color: #000000;">];<br />            temp2.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> temp.y </span><span style="color: #000000;">+</span><span style="color: #000000;"> dir[i][</span><span style="color: #800080;">1</span><span style="color: #000000;">];<br />            temp2.step </span><span style="color: #000000;">=</span><span style="color: #000000;"> temp.step </span><span style="color: #000000;">+</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />            temp2.state </span><span style="color: #000000;">=</span><span style="color: #000000;"> (temp.state </span><span style="color: #000000;">&gt;&gt;</span><span style="color: #800080;">2</span><span style="color: #000000;">) </span><span style="color: #000000;">|</span><span style="color: #000000;"> (i </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> (l </span><span style="color: #000000;">-</span><span style="color: #800080;">2</span><span style="color: #000000;">) </span><span style="color: #000000;">*</span><span style="color: #800080;">2</span><span style="color: #000000;">);<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (ok(temp2))<br />            {<br />                vis[temp2.x][temp2.y][temp2.state] </span><span style="color: #000000;">=</span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (temp2.x </span><span style="color: #000000;">==</span><span style="color: #800080;">1</span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> temp2.y </span><span style="color: #000000;">==</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />                {<br />                    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp2.step;<br />                }<br />                q.push(temp2);<br />            }<br />        }<br />        clearmap();<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("t.txt", "r", stdin);</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> t </span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">m, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">l), n </span><span style="color: #000000;">|</span><span style="color: #000000;"> m </span><span style="color: #000000;">|</span><span style="color: #000000;"> l)<br />    {<br />        t</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        input();<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].x </span><span style="color: #000000;">==</span><span style="color: #800080;">1</span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].y </span><span style="color: #000000;">==</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />        {<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Case %d: %d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, t, </span><span style="color: #800080;">0</span><span style="color: #000000;">);<br />            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;<br />        }<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ans1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> getmin();<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ans2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> getmax();<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (ans1 </span><span style="color: #000000;">==</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />        {<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Case %d: %d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, t, </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">);<br />            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;<br />        }<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (ans1 </span><span style="color: #000000;">==</span><span style="color: #000000;"> ans2)<br />        {<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Case %d: %d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, t, ans1);<br />            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;<br />        }<br />        minstep </span><span style="color: #000000;">=</span><span style="color: #000000;"> ans1;<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (ans2 </span><span style="color: #000000;">==</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />            maxstep </span><span style="color: #000000;">=</span><span style="color: #800080;">0x3f3f3f3f</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />            maxstep </span><span style="color: #000000;">=</span><span style="color: #000000;"> ans2;<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ans </span><span style="color: #000000;">=</span><span style="color: #000000;"> bfs();<br />        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">Case %d: %d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, t, ans);<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></div>
</div>
</div>
