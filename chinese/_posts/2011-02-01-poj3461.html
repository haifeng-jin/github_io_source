---
layout: post
title: poj3461
category: chinese
---
<p>kmp算法</p> <p>首先，这类题不要用cin，应该用scanf和char[]</p> <p>其次，overlap是重叠的意思，不是扣圈的意思</p> <p>&nbsp;</p> <div class="cnblogs_Highlighter"> <pre class="brush: csharp; auto-links: true; collapse: true; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;cstdlib&gt;
using namespace std;

const int maxm = 1000005, maxn = 10005;

char str[maxm + maxn], pat[maxn];
int len, len1, len2;

int kmp()
{
	int fail[maxn];
	int i, j, k;
	memset(fail, -1, sizeof(fail));
	for (i = 1; i &lt; len2; ++i)
	{
		for (k = fail[i - 1]; k &gt;= 0 &amp;&amp; pat[i] != pat[k + 1]; k = fail[k])
			;
		if (pat[k + 1] == pat[i])
			fail[i] = k + 1;
	}
	i = j = 0;
	int ans = 0;
	while (i &lt; len)
	{
		if (pat[j] == str[i])
			++i, ++j;
		else if (j == 0)
			++i;
		else
		{
			if (j == len2)
				ans++;
			j = fail[j - 1] + 1;
		}
	}
	if (j == len2)
		ans++;
	return ans;
}

int main()
{
	//freopen("D:\\t.txt", "r", stdin);
	int t;
	scanf("%d", &amp;t);
	while (t--)
	{
		scanf("%s", pat);
		scanf("%s", str);
		len1 =strlen(str);
		len2 =strlen(pat);
		len = len1;
		printf("%d\n", kmp());
	}
	return 0;
}

</pre>
</div>
