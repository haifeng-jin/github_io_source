---
layout: post
title: poj2771
category: chinese
---
<p>题意：人和人之间如果满足4个条件的任意一条就不会成为夫妻，给定一些人，问从中最多能选多少人且保证任意两人不可能成为夫妻。</p>
<p>分析：由于条件之一是性别相同则不能成为夫妻。我们根据性别把人划分为两个集合，每个人是一个结点构成二分图，若两个人可能成为夫妻则连一条边。（同性之间不能成为夫妻，所以同集合内无边，此图必定为二分图）。题目要求是选出最多的人，且任意两人之间无边。这就是求二分图的最大独立集。只要用总人数－最大匹配数即可。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('a36f7c5f-af63-4ba6-88c2-27e38caa2e98')"><img src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" class="code_img_closed" id="code_img_closed_a36f7c5f-af63-4ba6-88c2-27e38caa2e98" /><img src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" class="code_img_opened" id="code_img_opened_a36f7c5f-af63-4ba6-88c2-27e38caa2e98" onclick="cnblogs_code_hide('a36f7c5f-af63-4ba6-88c2-27e38caa2e98',event)" style="display: none;" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_a36f7c5f-af63-4ba6-88c2-27e38caa2e98" class="cnblogs_code_hide">
<pre><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstdio</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstdlib</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstring</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> maxn 505</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> maxl 106</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> Person<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> h;<br />    </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> music[maxl];<br />    </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> sport[maxl];<br />} male[maxn], female[maxn];<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> uN, vN, n;<br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> g[maxn][maxn];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> xM[maxn], yM[maxn];<br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> chk[maxn];<br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> SearchPath(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> u)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> v;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (v </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; v </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> vN; v</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (g[u][v] </span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;"> </span><span style="color: #000000;">!</span><span style="color: #000000;">chk[v])<br />        {<br />            chk[v] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (yM[v] </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;"> </span><span style="color: #000000;">||</span><span style="color: #000000;"> SearchPath(yM[v]))<br />            {<br />                yM[v] </span><span style="color: #000000;">=</span><span style="color: #000000;"> u;<br />                xM[u] </span><span style="color: #000000;">=</span><span style="color: #000000;"> v;<br />                </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />            }<br />        }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #0000ff;">false</span><span style="color: #000000;">;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> MaxMatch()<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> u, ret </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    memset(xM, </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(xM));<br />    memset(yM, </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(yM));<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (u </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; u </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> uN; u</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (xM[u] </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">)<br />        {<br />            memset(chk, </span><span style="color: #0000ff;">false</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(chk));<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (SearchPath(u))<br />                ret</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ret;<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> input()<br />{<br />    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n);<br />    uN </span><span style="color: #000000;">=</span><span style="color: #000000;"> vN </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a;<br />        </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> sex[</span><span style="color: #800080;">3</span><span style="color: #000000;">];<br />        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%s</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">a, sex);<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (sex[</span><span style="color: #800080;">0</span><span style="color: #000000;">] </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">'</span><span style="color: #800000;">M</span><span style="color: #800000;">'</span><span style="color: #000000;">)<br />        {<br />            male[uN].h </span><span style="color: #000000;">=</span><span style="color: #000000;"> a;<br />            scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%s%s</span><span style="color: #800000;">"</span><span style="color: #000000;">, male[uN].music, male[uN].sport);<br />            uN</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />        {<br />            female[vN].h </span><span style="color: #000000;">=</span><span style="color: #000000;"> a;<br />            scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%s%s</span><span style="color: #800000;">"</span><span style="color: #000000;">, female[vN].music, female[vN].sport);<br />            vN</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />        }<br />    }<br />}<br /><br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> couple(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> b)<br />{<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (abs(male[a].h </span><span style="color: #000000;">-</span><span style="color: #000000;"> female[b].h) </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> </span><span style="color: #800080;">40</span><span style="color: #000000;">)<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #0000ff;">false</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (strcmp(male[a].music, female[b].music))<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #0000ff;">false</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (strcmp(male[a].sport, female[b].sport) </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">)<br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #0000ff;">false</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> make()<br />{<br />    memset(g, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(g));<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> uN; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> vN; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (couple(i, j))<br />                g[i][j] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("t.txt", "r", stdin);</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> t;<br />    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">t);<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (t</span><span style="color: #000000;">--</span><span style="color: #000000;">)<br />    {<br />        input();<br />        make();<br />        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, n </span><span style="color: #000000;">-</span><span style="color: #000000;"> MaxMatch());<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></pre>
</div>
</div>
