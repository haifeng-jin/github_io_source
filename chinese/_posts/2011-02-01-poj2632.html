---
layout: post
title: poj2632
category: chinese
---
<p>本题的图与其他题稍有不同，本题以左下角为（0，0）点，列号对应x,行号对应y。</p>  <p>完全模拟即可。</p>  <p>&#160;</p>  <pre class="brush: cpp; auto-links: true; collapse: true; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;cstdlib&gt;
using namespace std;

const int maxa = 101;

struct Robot
{
	int x, y, d;
} robot[maxa];

int dir[4][2] =
{
{ 0, 1 },//e
{ -1, 0 }, //s
{ 0, -1 }, //w
{ 1, 0 } }; //n


int n, m, cx, cy;
int map[maxa][maxa];

void init()
{
	memset(map, 0, sizeof(map));
	cin &gt;&gt; cy &gt;&gt; cx &gt;&gt; n &gt;&gt; m;
	for (int i = 1; i &lt;= n; i++)
	{
		cin &gt;&gt; robot[i].y &gt;&gt; robot[i].x;
		getchar();
		switch (getchar())
		{
		case 'E':
			robot[i].d = 0;
			break;
		case 'S':
			robot[i].d = 1;
			break;
		case 'W':
			robot[i].d = 2;
			break;
		case 'N':
			robot[i].d = 3;
			break;
		}
		map[robot[i].x][robot[i].y] = i;
	}
}

bool forward(int a)
{
	map[robot[a].x][robot[a].y] = 0;
	robot[a].x += dir[robot[a].d][0];
	robot[a].y += dir[robot[a].d][1];
	int x = robot[a].x;
	int y = robot[a].y;
	if (x == 0 || x &gt; cx || y == 0 || y &gt; cy)
	{
		printf(&quot;Robot %d crashes into the wall\n&quot;, a);
		return false;
	}
	if (map[x][y] != 0)
	{
		printf(&quot;Robot %d crashes into robot %d\n&quot;, a, map[x][y]);
		return false;
	}
	map[x][y] = a;
	return true;
}

bool operate(int a, char op, int times)
{
	if (op == 'F')
	{
		for (int i = 0; i &lt; times; i++)
			if (!forward(a))
				return false;
		return true;
	}
	if (op == 'L')
		robot[a].d -= times;
	else
		robot[a].d += times;
	robot[a].d %= 4;
	if (robot[a].d &lt; 0)
		robot[a].d += 4;
	return true;
}

void finish(int times)
{
	string st;
	while (times--)
		getline(cin, st);
}

void work()
{
	for (int i = 0; i &lt; m; i++)
	{
		int num, time;
		char op;
		cin &gt;&gt; num;
		getchar();
		cin &gt;&gt; op &gt;&gt; time;
		getchar();
		if (!operate(num, op, time))
		{
			finish(m - i - 1);
			return;
		}
	}
	cout &lt;&lt; &quot;OK\n&quot;;
}

int main()
{
	//freopen(&quot;D:\\t.txt&quot;, &quot;r&quot;, stdin);
	int t;
	cin &gt;&gt; t;
	while (t--)
	{
		init();
		work();
	}
	return 0;
}</pre>
