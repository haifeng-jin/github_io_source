---
layout: post
title: poj2780
category: chinese
---
<p>Âêå2606</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('99c705c9-ae31-4e35-a7f0-7a8b56777d9d')"><img id="code_img_closed_99c705c9-ae31-4e35-a7f0-7a8b56777d9d" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" /><img style="display: none;" id="code_img_opened_99c705c9-ae31-4e35-a7f0-7a8b56777d9d" class="code_img_opened" onclick="cnblogs_code_hide('99c705c9-ae31-4e35-a7f0-7a8b56777d9d',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_99c705c9-ae31-4e35-a7f0-7a8b56777d9d" class="cnblogs_code_hide">
<pre>#include &lt;iostream&gt;<br />#include &lt;cstdio&gt;<br />#include &lt;cstdlib&gt;<br />#include &lt;cstring&gt;<br />#include &lt;cmath&gt;<br />#include &lt;algorithm&gt;<br /><span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span> std;<br /><br /><span style="color: #0000ff;">#define</span> eps 1.0e-8<br /><span style="color: #0000ff;">#define</span> maxn 1005<br /><br /><span style="color: #0000ff;">struct</span> XPoint<br />{<br />    <span style="color: #0000ff;">int</span> x, y;<br />} point[maxn];<br /><br /><span style="color: #0000ff;">struct</span> Line<br />{<br />    <span style="color: #0000ff;">int</span> a, b;<br />    <span style="color: #0000ff;">double</span> k;<br />    <span style="color: #0000ff;">bool</span> end;<br />} line[maxn * maxn];<br /><br /><span style="color: #0000ff;">int</span> n, ncount;<br /><br /><span style="color: #0000ff;">bool</span> <span style="color: #0000ff;">operator</span> &lt;(<span style="color: #0000ff;">const</span> Line &amp;a, <span style="color: #0000ff;">const</span> Line &amp;b)<br />{<br />    <span style="color: #0000ff;">if</span> (abs(a.k - b.k) &gt; eps &amp;&amp; !a.end &amp;&amp; !b.end)<br />        <span style="color: #0000ff;">return</span> a.k &lt; b.k;<br />    <span style="color: #0000ff;">if</span> (a.end != b.end)<br />        <span style="color: #0000ff;">return</span> a.end &lt; b.end;<br />    <span style="color: #0000ff;">if</span> (a.a != b.a)<br />        <span style="color: #0000ff;">return</span> a.a &lt; b.a;<br />    <span style="color: #0000ff;">return</span> a.b &lt; b.b;<br />}<br /><br /><span style="color: #0000ff;">double</span> getk(XPoint &amp;a, XPoint &amp;b)<br />{<br />    <span style="color: #0000ff;">return</span> (b.y - a.y) * <span style="color: #800080;">1.0</span> / (b.x - a.x);<br />}<br /><br /><span style="color: #0000ff;">int</span> main()<br />{<br />    <span style="color: #008000;">//</span><span style="color: #008000;">freopen("t.txt", "r", stdin);</span><span style="color: #008000;"><br /></span>    <span style="color: #0000ff;">while</span> (~scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span>, &amp;n))<br />    {<br />        ncount = <span style="color: #800080;">0</span>;<br />        <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n; i++)<br />            scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>, &amp;point[i].x, &amp;point[i].y);<br />        <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n - <span style="color: #800080;">1</span>; i++)<br />            <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = i + <span style="color: #800080;">1</span>; j &lt; n; j++)<br />            {<br />                line[ncount].a = i;<br />                line[ncount].b = j;<br />                <span style="color: #0000ff;">if</span> (point[i].x == point[j].x)<br />                    line[ncount].end = <span style="color: #0000ff;">true</span>;<br />                <span style="color: #0000ff;">else</span><br />                {<br />                    line[ncount].end = <span style="color: #0000ff;">false</span>;<br />                    line[ncount].k = getk(point[i], point[j]);<br />                }<br />                ncount++;<br />            }<br />        sort(line, line + ncount);<br />        <span style="color: #0000ff;">int</span> start = <span style="color: #800080;">0</span>;<br />        <span style="color: #0000ff;">int</span> ans = <span style="color: #800080;">0</span>;<br />        <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt; ncount; i++)<br />        {<br />            <span style="color: #0000ff;">if</span> (!((line[i].end &amp;&amp; line[start].end) || ((!line[i].end &amp;&amp; !line[start].end) &amp;&amp; (line[i].k - line[start].k) &lt; eps)) || line[i].a != line[start].a)<br />            {<br />                start = i;<br />                <span style="color: #0000ff;">continue</span>;<br />            }<br />            <span style="color: #0000ff;">if</span> (i - start &gt; ans)<br />            {<br />                ans = i - start;<br />            }<br />        }<br />        printf(<span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span>, ans + <span style="color: #800080;">2</span>);<br />    }<br />    <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span>;<br />}</pre>
</div>
</div>
<p></p>
