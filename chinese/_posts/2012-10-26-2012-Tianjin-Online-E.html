---
layout: post
title: hdu 4435(第37届ACM/ICPC天津赛区现场赛E题)
category: chinese
---
<p>题意：给定每个点在平面内的坐标，要求选出一些点，在这些点建立加油站，使得总花费最少（1号点必须建立加油站）。在i点建立加油站需要花费2^i。建立加油站要求能使得汽车从1点开始走遍全图所有的点并回到1点，途中汽车加油次数不限，每个加油站的使用次数不限，但是汽车油箱有上限d（加满油可以跑距离d）。</p>
<p>分析：突破口在于在i号点建立加油站的费用为2^i，这样特殊的花费会使得我们有一个贪心的规律，就是尽量不在号比较大的点建加油站，如果在n号点建立加油站的费用会大于在除n以外的所有点都建加油站的总费用。所以我们可以先尝试把除n以外的所有点建立加油站，观察是否满足要求。若满足则说明我们必然不会在n点建立加油站，若不满足我们就一定要在n点建加油站。若需要建，我们就建，然后就不用再考虑n点了，在确定了n点之后，我们用同样的方法来观察n-1号点是否需要建立加油站，即将1~n-2号点都建立加油站，观察是否满足要求。以此类推，可以推出所有点的情况。</p>
<p>接下来我们需要解决对于一种给定的加油站建立情况，我们如何判断它是否满足题中的travel around的要求。分为两部判断，1.判断所有加油站是否可达（从1号点开始广搜，若到当前点距离&lt;=d则入队）。2.判断其余点是否可达（刚才的广搜过程可以顺便标出每个点到最近的加油站的距离，要求能从加油站到该点并返回加油站，所以点到加油站的距离必须小于等于d/2）。若满足这两点必然符合要求，否则不符合要求。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('2db7b657-597f-4d84-bcfb-b85f55a1ddd5')"><img id="code_img_closed_2db7b657-597f-4d84-bcfb-b85f55a1ddd5" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_2db7b657-597f-4d84-bcfb-b85f55a1ddd5" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('2db7b657-597f-4d84-bcfb-b85f55a1ddd5',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_2db7b657-597f-4d84-bcfb-b85f55a1ddd5" class="cnblogs_code_hide">
<pre>#include &lt;iostream&gt;<span style="color: #000000;">
#include </span>&lt;cstdlib&gt;<span style="color: #000000;">
#include </span>&lt;cstdio&gt;<span style="color: #000000;">
#include </span>&lt;cstring&gt;<span style="color: #000000;">
#include </span>&lt;cmath&gt;
<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;

</span><span style="color: #0000ff;">#define</span> maxn 150
<span style="color: #0000ff;">#define</span> inf 0x3f3f3f3f

<span style="color: #0000ff;">struct</span><span style="color: #000000;"> Point
{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, y;
} point[maxn];

</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n, d;
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> map[maxn][maxn];
</span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> isstation[maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> q[maxn];
</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dist[maxn];
</span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> vis[maxn];

</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> input()
{
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n; i++<span style="color: #000000;">)
        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>, &amp;point[i].x, &amp;<span style="color: #000000;">point[i].y);
}

</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> make()
{
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n; i++<span style="color: #000000;">)
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; n; j++<span style="color: #000000;">)
            map[i][j] </span>=<span style="color: #000000;"> ceil(
                    sqrt(
                            (point[i].x </span>-<span style="color: #000000;"> point[j].x)
                                    </span>* (point[i].x -<span style="color: #000000;"> point[j].x)
                                    </span>+ (point[i].y -<span style="color: #000000;"> point[j].y)
                                            </span>* (point[i].y -<span style="color: #000000;"> point[j].y)));
}

</span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> ok()
{
    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> front, rear;

    memset(vis, </span><span style="color: #800080;">0</span>, <span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(vis));
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n; i++<span style="color: #000000;">)
        </span><span style="color: #0000ff;">if</span> (!<span style="color: #000000;">isstation[i])
            dist[i] </span>=<span style="color: #000000;"> inf;
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
            dist[i] </span>= <span style="color: #800080;">0</span><span style="color: #000000;">;
    front </span>= rear = <span style="color: #800080;">0</span><span style="color: #000000;">;
    q[rear</span>++] = <span style="color: #800080;">0</span><span style="color: #000000;">;
    vis[</span><span style="color: #800080;">0</span>] = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    dist[</span><span style="color: #800080;">0</span>] = <span style="color: #800080;">0</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">while</span> (front !=<span style="color: #000000;"> rear)
    {
        </span><span style="color: #0000ff;">int</span> u = q[front++<span style="color: #000000;">];
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n; i++<span style="color: #000000;">)
            </span><span style="color: #0000ff;">if</span> (!vis[i]&amp;&amp; map[u][i] &lt;=<span style="color: #000000;"> d)
            {
                dist[i] </span>= min(dist[i], dist[u] +<span style="color: #000000;"> map[u][i]);
                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (isstation[i])
                {
                    vis[i] </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                    q[rear</span>++] =<span style="color: #000000;"> i;
                }
            }
    }
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n; i++<span style="color: #000000;">)
        </span><span style="color: #0000ff;">if</span> (isstation[i] &amp;&amp; !<span style="color: #000000;">vis[i])
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (!isstation[i] &amp;&amp; dist[i] * <span style="color: #800080;">2</span> &gt;<span style="color: #000000;"> d)
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
}

</span><span style="color: #0000ff;">void</span><span style="color: #000000;"> work()
{
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n; i++<span style="color: #000000;">)
        isstation[i] </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">if</span> (!<span style="color: #000000;">ok())
    {
        printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">-1\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = n - <span style="color: #800080;">1</span>; i &gt;= <span style="color: #800080;">1</span>; i--<span style="color: #000000;">)
    {
        isstation[i] </span>= <span style="color: #0000ff;">false</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (ok())
            </span><span style="color: #0000ff;">continue</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
            isstation[i] </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
    }
    </span><span style="color: #0000ff;">int</span> i = n - <span style="color: #800080;">1</span><span style="color: #000000;">;
    </span><span style="color: #0000ff;">while</span> (!<span style="color: #000000;">isstation[i])
        i</span>--<span style="color: #000000;">;
    </span><span style="color: #0000ff;">for</span> (; i &gt;= <span style="color: #800080;">0</span>; i--<span style="color: #000000;">)
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (isstation[i])
            putchar(</span><span style="color: #800000;">'</span><span style="color: #800000;">1</span><span style="color: #800000;">'</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;">
            putchar(</span><span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span><span style="color: #000000;">);
    putchar(</span><span style="color: #800000;">'</span><span style="color: #800000;">\n</span><span style="color: #800000;">'</span><span style="color: #000000;">);
}

</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
{
    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("t.txt", "r", stdin);</span>
    <span style="color: #0000ff;">while</span> (~scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>, &amp;n, &amp;<span style="color: #000000;">d))
    {
        input();
        make();
        work();
    }
    </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
}</span></pre>
</div>
</div>
