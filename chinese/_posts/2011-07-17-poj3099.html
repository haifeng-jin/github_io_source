---
layout: post
title: poj3099
category: chinese
---
<p>bfs</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('7800a7a0-43df-4632-a8b8-15cc51aa016f')"><img src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" class="code_img_closed" id="code_img_closed_7800a7a0-43df-4632-a8b8-15cc51aa016f" /><img src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" class="code_img_opened" id="code_img_opened_7800a7a0-43df-4632-a8b8-15cc51aa016f" onclick="cnblogs_code_hide('7800a7a0-43df-4632-a8b8-15cc51aa016f',event)" style="display: none;" /><span class="cnblogs_code_collapse">View Code </span>
<div id="cnblogs_code_open_7800a7a0-43df-4632-a8b8-15cc51aa016f" class="cnblogs_code_hide">
<pre><span style="color: #000000;">#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">iostream</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstdio</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstdlib</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">cstring</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">using</span><span style="color: #000000;"> </span><span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;<br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> maxn 2005</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;"> inf 0x3f3f3f3f</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> Edge<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> v, next;<br />}edge[maxn];<br /><br /></span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> Point<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> x, y, z;<br />}point[maxn];<br /><br /></span><span style="color: #0000ff;">struct</span><span style="color: #000000;"> Node<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> d, v;<br />}q[maxn];<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> n, id[maxn];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> head[maxn];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> length[maxn];<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ecount;<br /></span><span style="color: #0000ff;">bool</span><span style="color: #000000;"> vis[maxn];<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> dist(Point </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">a, Point </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">b)<br />{<br />    Point c;<br />    c.x </span><span style="color: #000000;">=</span><span style="color: #000000;"> a.x </span><span style="color: #000000;">-</span><span style="color: #000000;"> b.x;<br />    c.y </span><span style="color: #000000;">=</span><span style="color: #000000;"> a.y </span><span style="color: #000000;">-</span><span style="color: #000000;"> b.y;<br />    c.z </span><span style="color: #000000;">=</span><span style="color: #000000;"> a.z </span><span style="color: #000000;">-</span><span style="color: #000000;"> b.z;<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> c.x </span><span style="color: #000000;">*</span><span style="color: #000000;"> c.x </span><span style="color: #000000;">+</span><span style="color: #000000;"> c.y </span><span style="color: #000000;">*</span><span style="color: #000000;"> c.y </span><span style="color: #000000;">+</span><span style="color: #000000;"> c.z </span><span style="color: #000000;">*</span><span style="color: #000000;"> c.z;<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> addedge(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a, </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> b)<br />{<br />    edge[ecount].next </span><span style="color: #000000;">=</span><span style="color: #000000;"> head[a];<br />    edge[ecount].v </span><span style="color: #000000;">=</span><span style="color: #000000;"> b;<br />    head[a] </span><span style="color: #000000;">=</span><span style="color: #000000;"> ecount</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;"> input()<br />{<br />    scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">id[</span><span style="color: #800080;">0</span><span style="color: #000000;">], </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].x, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].y, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">point[</span><span style="color: #800080;">0</span><span style="color: #000000;">].z);<br />    memset(head, </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(head));<br />    ecount </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />    {<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> mind </span><span style="color: #000000;">=</span><span style="color: #000000;"> inf;<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> mini;<br />        scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">id[i], </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">point[i].x, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">point[i].y, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">point[i].z);<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> i; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />        {<br />            </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> temp </span><span style="color: #000000;">=</span><span style="color: #000000;"> dist(point[i], point[j]);<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (temp </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> mind)<br />            {<br />                mini </span><span style="color: #000000;">=</span><span style="color: #000000;"> j;<br />                mind </span><span style="color: #000000;">=</span><span style="color: #000000;"> temp;<br />            }<br />        }<br />        addedge(i, mini);<br />        addedge(mini, i);<br />    }<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> bfs(</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> a)<br />{<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> front </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> rear </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ret </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    memset(vis, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(vis));<br />    q[</span><span style="color: #800080;">0</span><span style="color: #000000;">].d </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />    q[</span><span style="color: #800080;">0</span><span style="color: #000000;">].v </span><span style="color: #000000;">=</span><span style="color: #000000;"> a;<br />    vis[a] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (front </span><span style="color: #000000;">!=</span><span style="color: #000000;"> rear)<br />    {<br />        Node temp </span><span style="color: #000000;">=</span><span style="color: #000000;"> q[front</span><span style="color: #000000;">++</span><span style="color: #000000;">];<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (front </span><span style="color: #000000;">==</span><span style="color: #000000;"> maxn)<br />            front </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (temp.d </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> ret)<br />            ret </span><span style="color: #000000;">=</span><span style="color: #000000;"> temp.d;<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> head[temp.v]; i </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">; i </span><span style="color: #000000;">=</span><span style="color: #000000;"> edge[i].next)<br />        {<br />            </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> v </span><span style="color: #000000;">=</span><span style="color: #000000;"> edge[i].v;<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (</span><span style="color: #000000;">!</span><span style="color: #000000;">vis[v])<br />            {<br />                q[rear].v </span><span style="color: #000000;">=</span><span style="color: #000000;"> v;<br />                q[rear].d </span><span style="color: #000000;">=</span><span style="color: #000000;"> temp.d </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />                rear</span><span style="color: #000000;">++</span><span style="color: #000000;">;<br />                </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (rear </span><span style="color: #000000;">==</span><span style="color: #000000;"> maxn)<br />                    rear </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />                vis[v] </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">true</span><span style="color: #000000;">;<br />            }<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ret;<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;"> main()<br />{<br />    </span><span style="color: #008000;">//</span><span style="color: #008000;">freopen("t.txt", "r", stdin);</span><span style="color: #008000;"><br /></span><span style="color: #000000;">    </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (scanf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span><span style="color: #000000;">, </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">n), n)<br />    {<br />        input();<br />        memset(length, </span><span style="color: #800080;">0</span><span style="color: #000000;">, </span><span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(length));<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />            length[i] </span><span style="color: #000000;">=</span><span style="color: #000000;"> bfs(i);<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> len </span><span style="color: #000000;">=</span><span style="color: #000000;"> inf;<br />        </span><span style="color: #0000ff;">int</span><span style="color: #000000;"> ans1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">, ans2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (</span><span style="color: #0000ff;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> n; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (length[i] </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> len)<br />            {<br />                len </span><span style="color: #000000;">=</span><span style="color: #000000;"> length[i];<br />                ans1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> i;<br />                ans2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">;<br />            }</span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (length[i] </span><span style="color: #000000;">==</span><span style="color: #000000;"> len)<br />                ans2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> i;<br />        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;"> </span><span style="color: #000000;">==</span><span style="color: #000000;"> ans2)<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, id[ans1]);<br />        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"><br />        {<br />            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (id[ans1] </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> id[ans2])<br />                swap(ans1, ans2);<br />            printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%d %d\n</span><span style="color: #800000;">"</span><span style="color: #000000;">, id[ans1], id[ans2]);<br />        }<br />    }<br />    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;<br />}</span></pre>
</div>
</div>
