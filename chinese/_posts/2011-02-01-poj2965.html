---
layout: post
title: poj2965
category: chinese
---
<p>dfs,O(2^16)</p>  <p>&#160;</p>  <pre class="brush: cpp; auto-links: true; collapse: true; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: true; tab-size: 4; toolbar: true;">#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;cstdlib&gt;
using namespace std;

bool map[4][4];
int ans[16];

void init()
{
	int i, j;

	for (i = 0; i &lt; 4; i++)
	{
		for (j = 0; j &lt; 4; j++)
		{
			char ch;
			cin &gt;&gt; ch;
			if (ch == '-')
				map[i][j] = true;
			else
				map[i][j] = false;
		}
		getchar();
	}
}

void operate(int x, int y)
{
	if (x &lt; 0 || y &lt; 0 || x &gt; 3 || y &gt; 3)
		return;
	map[x][y] = !map[x][y];
}

void turn(int pos)
{
	ans[pos] = !ans[pos];
	int x = pos / 4;
	int y = pos % 4;
	int i;
	operate(x, y);
	for (i = 1; i &lt; 4; i++)
	{
		operate(x + i, y);
		operate(x, y + i);
		operate(x - i, y);
		operate(x, y - i);
	}
}

bool finished()
{
	int tot = 0;
	int i;
	for (i = 0; i &lt; 16; i++)
		tot += map[i / 4][i % 4];
	return (tot == 16);
}

void output()
{
	int i;
	for (i = 0; i &lt; 16; i++)
	{
		if (ans[i])
			printf(&quot;%d %d\n&quot;, i / 4 + 1, i % 4 + 1);
	}
}

void dfs(int pos, int step)
{
	if (finished())
	{
		cout &lt;&lt; step &lt;&lt; endl;
		output();
		exit(0);
		return;
	}
	if (pos &gt;= 16)
		return;
	dfs(pos + 1, step);
	turn(pos);
	dfs(pos + 1, step + 1);
	turn(pos);//这句忘了写，导致错误
}

int main()
{
	//freopen(&quot;D:\\t.txt&quot;, &quot;r&quot;, stdin);
	init();
	dfs(0, 0);

	return 0;
}</pre>
